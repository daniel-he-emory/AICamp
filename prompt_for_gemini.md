Claude Prompt: GrocerGenie AI Shopping Assistant
You are an expert AI software developer specializing in rapid prototyping with Python and Streamlit. Your task is to build a functional MVP for a 5-hour hackathon project called "GrocerGenie".

The goal is to create a single, self-contained Python script that accomplishes the entire user flow. The script will use hardcoded data for recipes and pantry inventory to simulate the core logic, and it will interact with a locally running "Kroger MCP Server" to handle grocery-specific tasks.

Project Overview
GrocerGenie is an AI assistant that helps with meal planning and shopping. For this MVP, the user will select a meal they want to cook. The application will determine which ingredients are missing from their pantry, find those ingredients at Kroger using an agentic tool, and automatically add them to the user's shopping cart.

Core Requirements & Assumptions
Single File Output: Your entire output must be a single Python script named app.py.

Dependencies: The script will require streamlit and requests. You must include the necessary import statements.

Kroger MCP Server: You must assume a server is already running locally at http://127.0.0.1:8000. Your Python script will act as a client, making HTTP POST requests to this server to use its tools.

Authentication: Assume the user has already authenticated with Kroger through the MCP server's browser flow. Your script does not need to handle the authentication process itself.

Component Development Plan
Please generate the code for app.py by implementing the following components in order.

Component 1: Hardcoded Data Structures
At the top of the app.py script, define the following Python dictionaries to act as our simulated database.

Simulated Pantry: Represents the user's current inventory. 1 means the item is in stock, 0 means it is not.

Python

PANTRY_INVENTORY = {
    "salt": 1,
    "pepper": 1,
    "olive oil": 1,
    "onion": 0,
    "garlic": 0,
    "chicken breast": 0,
    "pasta": 0,
    "canned tomatoes": 1,
    "lemon": 0
}
Recipe Book: A dictionary of available meal plans. Ingredients should be lowercase to match the pantry keys.

Python

RECIPES = {
    "lemon_chicken": {
        "display_name": "Lemon Herb Chicken",
        "ingredients": ["chicken breast", "olive oil", "garlic", "lemon", "salt", "pepper"]
    },
    "simple_pasta": {
        "display_name": "Garlic Tomato Pasta",
        "ingredients": ["pasta", "canned tomatoes", "garlic", "onion", "olive oil"]
    }
}
Component 2: Core Logic Function
Create a Python function that determines the necessary shopping list.

Function Signature: generate_shopping_list(meal_key: str) -> list[str]

Functionality:

It accepts a meal_key (e.g., "lemon_chicken").

It retrieves the list of ingredients from the RECIPES dictionary.

It iterates through the ingredients and checks if they are in stock in the PANTRY_INVENTORY dictionary (i.e., the value is greater than 0).

It returns a list containing only the names of the missing ingredients.

Component 3: Agentic Tool Interaction Functions
Create Python functions that make requests calls to the Kroger MCP Server endpoints. These functions will orchestrate the agentic workflow.

Function 1: Find Products

Signature: find_kroger_products(shopping_list: list[str]) -> list[dict]

Functionality:

It accepts the shopping_list of missing ingredients.

It iterates through each item_name in the list.

For each item, it makes a POST request to http://127.0.0.1:8000/tools/search_products.

The JSON payload for the request must be: {"term": item_name}.

From the response, it extracts the productId of the first product in the results.

It builds a list of dictionaries, where each dictionary has two keys: productId and quantity (hardcode quantity to 1).

It returns the final list of product dictionaries. Handle potential errors if a product is not found.

Function 2: Add to Cart

Signature: add_items_to_kroger_cart(product_list: list[dict]) -> bool

Functionality:

It accepts the product_list generated by the find_kroger_products function.

It makes a single POST request to http://127.0.0.1:8000/tools/bulk_add_to_cart.

The JSON payload for the request must be: {"items": product_list}.

It should return True if the request was successful and False otherwise.

Component 4: Streamlit User Interface
Using the Streamlit library, build the user-facing part of the application. This should be the main executable part of the script.

Set Page Title: Use st.title('GrocerGenie: AI Shopping Assistant').

Meal Selection: Create a dropdown menu for the user to select a meal. The options should be the display names from the RECIPES dictionary.

Python

# Example:
recipe_options = {key: details["display_name"] for key, details in RECIPES.items()}
selected_meal_key = st.selectbox(
    "What would you like to cook this week?",
    options=list(recipe_options.keys()),
    format_func=lambda key: recipe_options[key]
)
Action Button: Create a button with the label 'Generate Plan & Add to Cart'.

Execution Flow: When the button is clicked, execute the entire workflow in sequence:

Display a spinner with st.spinner(...).

Call generate_shopping_list() with the user's selected meal.

If the shopping list is empty, display a success message saying no items are needed.

If the list is not empty, pass it to find_kroger_products().

Pass the result of that to add_items_to_kroger_cart().

Display a final success message using st.success() that lists the items added to the cart.

If any step fails, display an error message using st.error().

Please provide the complete, final code for app.py in a single Python code block.